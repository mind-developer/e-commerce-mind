"use strict";window.WolmartCoreAdmin||(window.WolmartCoreAdmin={}),function(e){WolmartCoreAdmin.Metabox=function(){var o=function(){"video"==e(".editor-post-format select")?(e("#featured_video").closest(".rwmb-field").removeClass("hidden"),e('[name="supported_images"]').closest(".rwmb-field").addClass("hidden")):(e("#featured_video").closest(".rwmb-field").addClass("hidden"),e('[name="supported_images"]').closest(".rwmb-field").removeClass("hidden"))};e(window).on("load",o),e(window).on("load",(function(){e.fn.wpColorPicker&&e("input.wolmart-color-picker").wpColorPicker()})),e("body").on("change",".editor-post-format select",o)},WolmartCoreAdmin.Sidebar=function(){e("body").on("click",".wolmart-wrap #add_widget_area",(function(){var o=prompt("Widget Area Name"),t="",a=-1,n=e(this);if(o){if(n.attr("disabled","disabled"),"-"==(t=o.toLowerCase().replace(/(\W|_)+/g,"-"))[0]&&"-"==t[t.length-1]?t=t.slice(1,-1):"-"==t[0]?t=t.slice(1):"-"==t[t.length-1]&&(t=t.slice(0,-1)),wolmart_core_vars.sidebars)Object.keys(wolmart_core_vars.sidebars).forEach((function(e){if(0===e.indexOf(t)){var o=e.replace(t,"");""==o?a=Math.max(a,0):Number(o.slice(1))&&(a=Math.max(a,Number(o.slice(1))))}}));a>=0&&(t=t+"-"+(a+1)),e.ajax({url:wolmart_core_vars.ajax_url,data:{action:"wolmart_add_widget_area",nonce:wolmart_core_vars.nonce,name:o,slug:t},type:"post",success:function(a){wolmart_core_vars.sidebars[t]=o,e('<tr id="'+t+'" class="sidebar"><td class="title column-title">'+o+'</td><td class="slug column-slug">'+t+'</td><td class="remove column-remove"><a href="#">Remove</a></td></tr>').appendTo(e("#sidebar_table tbody#the-list")).hide().fadeIn(),n.removeAttr("disabled")}}).fail((function(e){console.log(e)}))}})),e("body").on("click","#sidebar_table .column-remove > a",(function(){if(confirm("Do you want to remove this sidebar?")){var o=e(this),t=o.closest("tr").find(".column-slug").text();e.ajax({url:wolmart_core_vars.ajax_url,data:{action:"wolmart_remove_widget_area",nonce:wolmart_core_vars.nonce,slug:t},type:"post",success:function(a){delete wolmart_core_vars.sidebars[t],o.closest("tr").fadeOut((function(){e(this).remove()})),o.removeAttr("disabled")}}).fail((function(e){console.log(e)}))}}))},WolmartCoreAdmin.TemplateWizard=function(){function o(){e("#wpbody-content .wrap:not(.wolmart-admin-notices)").prependTo(e("#wpbody-content .templates-builder")),e("div.updated, div.error, div.notice").not(".inline, .below-h2").appendTo(e(".wolmart-admin-notices"))}function t(){n(e(this).next(".wolmart-modal"))}function a(){n(e(this).parent(".wolmart-modal"))}function n(e){(e=e.add(e.prev(".wolmart-modal-overlay"))).removeClass("wolmart-modal-fade"),setTimeout((function(){e.removeClass("wolmart-modal-open")}),50)}function l(o){var t;o.preventDefault(),(t=(t=e("#wolmart_new_template")).add(t.prev(".wolmart-modal-overlay"))).addClass("wolmart-modal-open"),setTimeout((function(){t.addClass("wolmart-modal-fade")})),e("#wolmart-new-template-id").add("#wolmart-new-template-type").add("#wolmart-new-template-name").val("")}function i(o){var t=e(".wolmart-modal .template-name").val();t?e.ajax({url:wolmart_core_vars.ajax_url,data:{action:"wolmart_save_template",nonce:wolmart_core_vars.nonce,type:e(".wolmart-modal .template-type").val(),name:t,template_id:e("#wolmart-new-template-id").val(),template_type:e("#wolmart-new-template-type").val(),template_category:e(".wolmart-new-template-form .template-type").val()},type:"post",success:function(o){var t=parseInt(o.data);window.location.href=e(".wolmart-add-new-template").attr("href").replace("edit.php?post_type=wolmart_template",e("#wolmart-new-template-id").val()?e("#wolmart-elementor-studio").is(":checked")?"post.php?post="+t+"&action=elementor":"post.php?post="+t+"&action=edit&vcv-action=frontend&vcv-source-id="+t:"post.php?post="+t+"&action=edit&post_type=wolmart_template")}}).fail((function(e){console.log(e)})):e(".wolmart-modal .template-name").focus()}function r(o){13==o.keyCode&&e(".wolmart-modal #wolmart-create-template-type").length&&i()}return{init:function(){setTimeout(o,300),e(document.body).on("click",".wolmart-add-new-template",l).on("click",".wolmart-modal-close",a).on("click",".wolmart-modal-overlay",t).on("click",".wolmart-modal #wolmart-create-template-type",i).on("keydown",r)}}}(),WolmartCoreAdmin.BuilderAddons=function(){e(document.body).hasClass("elementor-editor-active")&&"undefined"!=typeof elementor&&(elementor.on("panel:init",(function(){var o='<div id="wolmart-elementor-addons" class="elementor-panel-footer-tool tooltip-target">                        <span class="wolmart-elementor-addons-toggle" data-tooltip="'+wolmart_core_vars.texts.elementor_addon_settings+'">                        <i class="wolmart-mini-logo"></i></span><div class="dropdown-box"><ul class="options">';wolmart_core_vars.builder_addons.length&&wolmart_core_vars.builder_addons.forEach((function(e){e.elementor&&(o+=e.elementor)})),e(o+="</ul></div></div>").insertAfter("#elementor-panel-footer-saver-preview").find(".wolmart-elementor-addons-toggle").tipsy({gravity:"s",title:function(){return this.getAttribute("data-tooltip")}})})),elementor.on("document:loaded",(function(){e("body").on("click",".wolmart-elementor-addons-toggle",(function(o){e(this).siblings(".dropdown-box").toggleClass("show")})).on("click",(function(o){e("#wolmart-elementor-addons .dropdown-box").removeClass("show")})).on("click","#wolmart-elementor-addons",(function(e){e.stopPropagation()})).on("click","#wolmart-custom-css",(function(o){e("#elementor-panel-footer-settings").trigger("click"),e(".elementor-tab-control-advanced a").trigger("click")})).on("click","#wolmart-custom-js",(function(o){e("#elementor-panel-footer-settings").trigger("click"),e(".elementor-tab-control-advanced a").trigger("click"),setTimeout((function(){e(".elementor-control-wolmart_custom_js_settings .elementor-panel-heading").trigger("click")}),100)})).on("click","#wolmart-edit-area",(function(o){e("#elementor-panel-footer-settings").trigger("click"),e(".elementor-control-wolmart_edit_area .elementor-section-toggle").trigger("click")}))}))),function(){if(e(document.body).hasClass("vc_editor vc_inline-shortcode-edit-form")||e("#post-body #wpb_visual_composer").length){wolmart_core_vars.wpb_preview_panels&&Object.keys(wolmart_core_vars.wpb_preview_panels).forEach((function(o){e("#vc_ui-panel-row-layout").before(e(wolmart_core_vars.wpb_preview_panels[o]))})),e(".wolmart-wpb-addons #wolmart-popup-options").length&&(vc.WolmartPopupOptionsUIPanelEditor=vc.PostSettingsPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).vcExtendUI({panelName:"wolmart_popup_options",uiEvents:{setSize:"setEditorSize",show:"setEditorSize"},setSize:function(){this.trigger("setSize")},setDefaultHeightSettings:function(){this.$el.css("height","70vh")},setEditorSize:function(){this.editor.setSizeResizable()}}),vc.wolmart_popup_options_view=new vc.WolmartPopupOptionsUIPanelEditor({el:"#vc_ui-panel-wolmart-popup-options"}),window.vc.ShortcodesBuilder&&(window.vc.ShortcodesBuilder.prototype.save=function(o){var t=this.getContent(),a={action:"vc_save"};a.vc_post_custom_css=window.vc.$custom_css.val(),a.content=this.wpautop(t),o&&(a.post_status=o,e(".vc_button_save_draft").hide(100),e("#vc_button-update").text(window.i18nLocale.update_all)),window.vc.update_title&&(a.post_title=this.getTitle());var n=e("#vc_ui-panel-wolmart-popup-options"),l=n.find("#vc_popup-width-field").val(),i=n.find("#vc_popup-h_pos-field").val(),r=n.find("#vc_popup-v_pos-field").val(),d=n.find("#vc_popup-border-field").val(),s=n.find("#vc_popup-margin-top-field").val(),c=n.find("#vc_popup-margin-right-field").val(),p=n.find("#vc_popup-margin-bottom-field").val(),m=n.find("#vc_popup-margin-left-field").val(),u=n.find("#vc_popup-animation-field").val(),v=n.find("#vc_popup-anim-duration-field").val();a.wolmart_popup_options={width:l||600,h_pos:i||"center",v_pos:r||"center",border:d||"0",top:s||"",right:c||"",bottom:p||"",left:m||"",popup_animation:u,popup_anim_duration:v||400},this.ajax(a).done((function(){window.vc.unsetDataChanged(),window.vc.showMessage(window.i18nLocale.vc_successfully_updated||"Successfully updated!")}))}),e("body").on("click",".wolmart-wpb-addons #wolmart-popup-options",(function(e){e&&e.preventDefault&&e.preventDefault(),vc.wolmart_popup_options_view.render().show()})).on("click",'#vc_ui-panel-wolmart-popup-options .vc_ui-button[data-vc-ui-element="button-save"]',(function(){if(vc.$frame_body){var o=e(this).closest(".vc_ui-wolmart-panel"),t=o.find("#vc_popup-width-field").val(),a=o.find("#vc_popup-h_pos-field").val(),n=o.find("#vc_popup-v_pos-field").val(),l=o.find("#vc_popup-border-field").val(),i=o.find("#vc_popup-margin-top-field").val(),r=o.find("#vc_popup-margin-right-field").val(),d=o.find("#vc_popup-margin-bottom-field").val(),s=o.find("#vc_popup-margin-left-field").val();vc.$frame_body.find(".mfp-wolmart .mfp-content").css({justifyContent:a,alignItems:n}),vc.$frame_body.find(".mfp-wolmart .popup").css({width:t?Number(t)+"px":"600px",marginTop:i?i+"px":"",marginRight:r?r+"px":"",marginBottom:d?d+"px":"",marginLeft:s?s+"px":""}),vc.$frame_body.find(".mfp-wolmart .wolmart-popup-content").css({borderRadius:l?Number(l)+"px":""})}else vc.wolmart_popup_options_view.hide()})))}}()},e(document).on("ready",(function(){WolmartCoreAdmin.Metabox(),void 0!==wolmart_core_vars.sidebars&&WolmartCoreAdmin.Sidebar(),WolmartCoreAdmin.TemplateWizard.init(),void 0!==wolmart_core_vars.condition_network&&WolmartCoreAdmin.TemplateCondition(),WolmartCoreAdmin.BuilderAddons()}))}(jQuery);