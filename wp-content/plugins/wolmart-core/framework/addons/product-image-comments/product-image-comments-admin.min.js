!function(e,t){"use strict";var a,i;window.WolmartCoreAdmin=window.WolmartCoreAdmin||{};var n={init:function(){this.onAddImage=this.onAddImage.bind(this),this.onRemoveImage=this.onRemoveImage.bind(this),this.onSelectImage=this.onSelectImage.bind(this),t(document.body).on("click","#wolmart-comment-images-metabox .button-image-upload",this.onAddImage).on("click","#wolmart-comment-images-metabox .button-image-remove",this.onRemoveImage)},onSelectImage:function(){var e=a.state().get("selection"),n=t(".wolmart-comment-img-preview-area"),m=i.siblings("input"),o=m.val();a.close(),e.map((function(e){if((e=e.toJSON()).id){var t=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;o=o?o+","+e.id:e.id,n.append('<div class="comment-img-wrapper" data-attachment_id="'+e.id+'"><img src="'+t+'"><a href="#" class="button-image-remove"><span class="dashicons dashicons-dismiss"></span></a></div>')}})),m.val(o).trigger("change")},onAddImage:function(n){n.preventDefault(),i=t(n.currentTarget),a||(a=e.media.frames.downloadable_file=e.media({title:"Choose an image",button:{text:"Use image"},multiple:!0})).on("select",this.onSelectImage),a.open(),this.requireSave()},onRemoveImage:function(e){var a=t(e.currentTarget),i=t("#wolmart-comment-images-metabox input"),n=t(".wolmart-comment-img-preview-area");a.parent().remove();var m="";n.find("div.comment-img-wrapper").each((function(){var e=t(this).data("attachment_id");m=m?m+","+e:e})),i.val(m).trigger("change"),e.preventDefault()}};WolmartCoreAdmin.commentImage=n,t(document).ready((function(){WolmartCoreAdmin.commentImage.init()}))}(wp,jQuery);