window.Wolmart||(window.Wolmart={}),function(t){var e={init:function(){t("form.comment-form").attr("enctype","multipart/form-data"),t("body").on("change",".comment-form #wolmart-add-image",e.showImageCount).on("submit",".comment-form",e.checkValidate).on("click",".review-images img",e.openLightBox)},showImageCount:function(e){t(".wolmart-comment-images span").text(e.target.files.length)},checkValidate:function(e){var o=t("#wolmart-add-image");if(o.length){var r=!1,i=!1;return o[0].files.length>wolmart_product_image_comments.max_count?(alert(wolmart_product_image_comments.error_msg.count_error),void e.preventDefault()):(console.log(o[0].files),o[0].files.forEach((function(e){var o=e.size,m=String(e.type);o>wolmart_product_image_comments.max_size&&(r=!0),t.inArray(m,wolmart_product_image_comments.mime_types)<0&&(i=!0)})),i?(alert(wolmart_product_image_comments.error_msg.mime_type_error),void e.preventDefault()):r?(alert(wolmart_product_image_comments.error_msg.size_error),void e.preventDefault()):void 0)}},openLightBox:function(e){e.preventDefault();var o=t(e.currentTarget),r=o.parent().children().map((function(){return{src:this.getAttribute("data-img-src"),w:this.getAttribute("data-img-width"),h:this.getAttribute("data-img-height"),title:this.getAttribute("alt")||""}})).get();if("undefined"!=typeof PhotoSwipe){var i=t(".pswp")[0],m=new PhotoSwipe(i,PhotoSwipeUI_Default,r,{index:o.index(),closeOnScroll:!1});m.listen("afterInit",(function(){m.shout("initialZoomInEnd")})),m.init()}}};Wolmart.CommentWithImage=e,Wolmart.$window.on("wolmart_complete",(function(){Wolmart.CommentWithImage.init()}))}(jQuery);