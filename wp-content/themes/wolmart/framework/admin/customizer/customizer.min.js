!function(e,t,o){"use strict";o(document).ready((function(){!function(){if(window.wolmart_admin_vars&&wolmart_admin_vars.page_links)for(const t in wolmart_admin_vars.page_links)wolmart_admin_vars.page_links[t].is_panel?e.panel(t)&&e.panel(t).expanded.bind((function(o){o&&wolmart_admin_vars.page_links[t].url&&wolmart_admin_vars.page_links[t].url!=e.previewer.previewUrl()&&e.previewer.previewUrl.set(wolmart_admin_vars.page_links[t].url)})):e.section(t)&&e.section(t).expanded.bind((function(o){o&&wolmart_admin_vars.page_links[t].url&&wolmart_admin_vars.page_links[t].url!=e.previewer.previewUrl()&&e.previewer.previewUrl.set(wolmart_admin_vars.page_links[t].url)}))}(),function(){function e(){var e=o("#customize-control-cs_menu_labels #label-select").children("option"),t={};e.length&&e.map((function(){t[o(this).text()]=o(this).val()})),o("#customize-control-menu_labels input").val(JSON.stringify(t)),o("#customize-control-menu_labels input").trigger("change")}o(document.body).on("click","#customize-control-cs_new_menu_label .btn-add-label",(function(t){t.preventDefault();var a=function(){var e=o("#customize-control-menu_labels input").val();return e?JSON.parse(e):{}}(),n=o("#customize-control-cs_new_menu_label .label-text").val(),i=o("#customize-control-cs_new_menu_label .wolmart-color-picker").val();n&&i?null!=a[n]?alert("This label already exists. Please add another one."):(o("#customize-control-cs_menu_labels select").children().prop("selected",!1),o("#customize-control-cs_menu_labels select").append('<option value="'+i+'" selected>'+n+"</option>"),e(),o("#customize-control-cs_new_menu_label .label-text, #customize-control-cs_new_menu_label .wolmart-color-picker").val(""),o("#customize-control-cs_new_menu_label .wp-color-result").css("background-color",""),o("#customize-control-cs_menu_labels #label-select").trigger("change")):alert("Plase input label text and label color")})).on("click","#customize-control-cs_menu_labels .btn-change-label",(function(t){t.preventDefault();var a=o("#customize-control-cs_menu_labels .menu-label .label-text").val(),n=o("#customize-control-cs_menu_labels .menu-label .wolmart-color-picker").val();a&&n&&(o("#customize-control-cs_menu_labels select option:selected").val(n).text(a),e())})).on("click","#customize-control-cs_menu_labels .btn-remove-label",(function(t){t.preventDefault();var a=o("#customize-control-cs_menu_labels select option:selected").text(),n=o("#customize-control-cs_menu_labels select option:selected").val();a&&n&&(o("#customize-control-cs_menu_labels select option[value="+n+"]").remove(),e(),o("#customize-control-cs_menu_labels select option").eq(0).prop("selected",!0),o("#customize-control-cs_menu_labels #label-select").trigger("change"))})).on("change","#customize-control-cs_menu_labels #label-select",(function(e){e.preventDefault(),o("#customize-control-cs_menu_labels .label-text").val(o(this).find("option:selected").text()),o("#customize-control-cs_menu_labels .wolmart-color-picker").val(o(this).val()),o("#customize-control-cs_menu_labels .wp-color-result").css("background-color",o(this).val())}))}(),o(document.body).on("input","#customize-control-import_src input, #customize-control-export_src input",(function(e){o(this).closest("li").next().find("button").attr("disabled",!o(this).val())})).on("click","#wolmart-import-options",(function(e){e.preventDefault();var t=o("#customize-control-import_src input");if(t.val()){if(confirm("Are you sure to import another theme options? All current options will be overwritten."))if(!t[0].files||t[0].files.length<1)alert("Please select source file.");else{var a=new FormData;a.append("wp_customize","on"),a.append("action","wolmart_import_theme_options"),a.append("nonce",wolmart_customizer_vars.nonce),a.append("file",t[0].files[0]);var n=o(this);o(this).attr("disabled","disabled"),o.ajax({url:wolmart_customizer_vars.ajax_url,data:a,type:"post",contentType:!1,processData:!1,success:function(e){n.removeAttr("disabled"),alert("Theme options imported seccessfully. Please refresh this page to notice new options.")}}).fail((function(e){alert("Something went wrong while importing theme options."),console.log(e)}))}}else alert("Please select source file.")})).on("click","#wolmart-export-options",(function(e){if(e.preventDefault(),o("#customize-control-export_src input").val()){var t=o(this);t.attr("disabled","disabled"),o.ajax({url:wolmart_customizer_vars.ajax_url,data:{wp_customize:"on",action:"wolmart_export_theme_options",nonce:wolmart_customizer_vars.nonce,pathname:o("#customize-control-export_src input").val()},type:"post",success:function(e){t.removeAttr("disabled"),alert("Theme options exported seccessfully.")}}).fail((function(e){alert("Something went wrong while exporting theme options."),console.log(e)}))}else alert("Please input destination file pathname.")})).on("click","#wolmart-reset-options",(function(e){e.preventDefault(),confirm("Are you sure to reset all theme options?")&&(o(this).attr("disabled","disabled"),o.ajax({url:wolmart_customizer_vars.ajax_url,data:{wp_customize:"on",action:"wolmart_reset_theme_options",nonce:wolmart_customizer_vars.nonce},type:"post",success:function(e){window.location.reload()}}).fail((function(e){console.log(e)})))})),o(".customize-pane-child .accordion-section-title .panel-title").add(".customize-pane-child .customize-section-title h3").append('<a href="#" class="section-nav-status" title="Customize Navigator"><i class="far fa-star"></i></a>'),o(".customizer-nav-item").each((function(){o("#sub-accordion-"+("section"==o(this).data("type")?"section":"panel")+"-"+o(this).data("target")+" .section-nav-status").addClass("active")})),o(document.body).on("click",".navigator-toggle",(function(e){e.preventDefault(),o(this).closest(".customizer-nav").toggleClass("active")})).on("click",".customizer-nav-item",(function(t){t.preventDefault(),e[o(this).data("type")](o(this).data("target")).focus()})).on("click",".section-nav-status",(function(t){var a=o(this);if(t.preventDefault(),!a.hasClass("disabled")){var n=a.closest(".customize-pane-child"),i="",c="",l="";if(n.hasClass("control-panel")?(c=n[0].id.replace("sub-accordion-panel-",""),l="panel"):(c=n[0].id.replace("sub-accordion-section-",""),l="section"),a.addClass("disabled").toggleClass("active"),a.hasClass("active")){if(a.closest(".customize-section-title").length){var s=a.closest(".customize-section-title"),r=s.find(".customize-action").text(),u=s.find("h3").text().replace(r,""),d=r.indexOf("â–¸");r=-1!=d?r.slice(d+1):""}else r="",u=a.closest(".panel-title").text();r&&(r+=" / "),i=r+u,o(".customizer-nav-items").append('<li><a href="#" data-target="'+c+'" data-type="'+l+'" class="customizer-nav-item">'+i+'</a><a href="#" class="customizer-nav-remove"><i class="fas fa-trash"></i></a></li>')}else o('.customizer-nav-items .customizer-nav-item[data-target="'+c+'"]').parent().fadeOut(200).addClass("hidden");a.removeClass("disabled"),e.state("saved").get()&&e.state("saved").set(!1)}})).on("click",".customizer-nav-remove",(function(t){t.preventDefault();var a=o(this).closest("li"),n=a.children(".customizer-nav-item");a.fadeOut(200).addClass("hidden"),o("#sub-accordion-"+("section"==n.data("type")?"section":"panel")+"-"+n.data("target")+" .section-nav-status").removeClass("active"),e.state("saved").get()&&e.state("saved").set(!1)})).on("click","#customize-save-button-wrapper #save",(function(){var e={};o(".customizer-nav-items li:not(.hidden) .customizer-nav-item").each((function(){e[o(this).data("target")]=[o(this).text(),o(this).data("type")]})),o.ajax({url:wolmart_customizer_vars.ajax_url,data:{wp_customize:"on",action:"wolmart_save_customize_nav",nonce:wolmart_customizer_vars.nonce,navs:e},type:"post",dataType:"json",success:function(e){}})})),function(){var e=location.href,o=e.search("#");if(0<o){var a=e.substr(o+1);if(void 0===t.customize.section(a))return;setTimeout((function(){t.customize.section(a).focus()}),2e3)}}(),o("input.wolmart-color-picker").wpColorPicker()})),e&&e.controlConstructor&&e.controlConstructor.background?e.controlConstructor.background=e.controlConstructor.background.extend({initKirkiControl:function(){var e=this,o=e.setting._value,a=e.container.find(".kirki-color-control");_.isUndefined(o["background-image"])&&(e.setting._value={"background-attachment":"","background-color":"","background-image":"","background-position":"","background-repeat":"","background-size":""}),(_.isUndefined(o["background-image"])||""===o["background-image"])&&(e.container.find(".background-wrapper > .background-repeat").hide(),e.container.find(".background-wrapper > .background-position").hide(),e.container.find(".background-wrapper > .background-size").hide(),e.container.find(".background-wrapper > .background-attachment").hide()),_.isUndefined(e.params.choices)||a.wpColorPicker(e.params.choices),setTimeout((function(){e.container.find(".wp-picker-clear").on("click",(function(){e.saveValue("background-color","")}))}),200),a.wpColorPicker({change:function(){setTimeout((function(){e.saveValue("background-color",a.val())}),100)}}),e.container.on("change",".background-repeat select",(function(){e.saveValue("background-repeat",jQuery(this).val())})).on("change click",".background-size input",(function(){e.saveValue("background-size",jQuery(this).val())})).on("change",".background-position select",(function(){e.saveValue("background-position",jQuery(this).val())})).on("change click",".background-attachment input",(function(){e.saveValue("background-attachment",jQuery(this).val())})).on("click",".background-image-upload-button",(function(o){var a=t.media({multiple:!1}).open().on("select",(function(){var t,o,n,i=a.state().get("selection").first(),c=i.toJSON().sizes.full.url;_.isUndefined(i.toJSON().sizes.medium)?_.isUndefined(i.toJSON().sizes.thumbnail)||(c=i.toJSON().sizes.thumbnail.url):c=i.toJSON().sizes.medium.url,t=i.toJSON().sizes.full.url,i.toJSON().id,i.toJSON().width,i.toJSON().height,""!==t&&e.container.find(".background-wrapper > .background-repeat, .background-wrapper > .background-position, .background-wrapper > .background-size, .background-wrapper > .background-attachment").show(),e.saveValue("background-image",t),o=e.container.find(".placeholder, .thumbnail"),n=e.container.find(".background-image-upload-remove-button"),o.length&&o.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+c+'" alt="" />'),n.length&&n.show()}));o.preventDefault()})).on("click",".background-image-upload-remove-button",(function(t){var o=e.container.find(".placeholder, .thumbnail"),a=e.container.find(".background-image-upload-remove-button");t.preventDefault(),e.saveValue("background-image",""),e.container.find(".background-wrapper > .background-repeat").hide(),e.container.find(".background-wrapper > .background-position").hide(),e.container.find(".background-wrapper > .background-size").hide(),e.container.find(".background-wrapper > .background-attachment").hide(),o.length&&o.removeClass().addClass("placeholder").html("No file selected"),a.length&&a.hide()}))}}):alert("Kirki plugin is not installed. Please install it first to take a full control.")}(wp.customize,wp,jQuery);